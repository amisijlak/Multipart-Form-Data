<page-title ng-if="layoutOptions.pageNames" title="Micro-cafe - Welcome" description="Take an order"></page-title>

<div class="row">
    <div class="col-md-12">

        <div class="panel panel-default">
            <div class="panel-heading" ng-show="false">
                <span><i class="glyphicon glyphicon-edit"></i> Take an order: </span>
            </div>

            <div class="panel-body">
                <form role="form" name="myForm" class="form-horizontal">
                    <div class="row">
                        <div class="form-group" ng-class="{error: myForm.name.$invalid}">
                            <label class="col-md-2"> Qty *</label>
                            <div class="col-md-4">
                                <input ng-model="order.quantity" type="number" class="form-control" required />
                            </div>
                            <div class="col-md-4 help-container">
                                <span ng-show="myForm.code.$dirty && myForm.quantity.$invalid" class="help-inline help-broken"><i class="glyphicon glyphicon-remove"></i> Quantity is required</span>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-md-2"> Product *</label>
                            <div class="col-md-4">
                                <select id="productSelector" name="product"
                                        ng-model="order.product"
                                        ng-options="product.displayName for product in products track by product.id"
                                        class="form-control"
                                        required
                                        ng-change="updateTotal()"></select>
                            </div>
                            <div class="col-md-4 help-container">
                                <span ng-show="myForm.productId.$invalid" class="help-inline help-broken"><i class="glyphicon glyphicon-remove"></i> Product required</span>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-md-2"> Total: </label>
                            <label class="col-md-2">{{order.total}}</label>
                        </div>

                        <div class="form-group">
                            <label class="col-md-2"></label>
                            <div class="col-md-4">
                                <a href="#/app/cashier-order" class="btn btn-white">Cancel</a>
                                <button ng-click="placeOrder(order);"
                                        ng-disabled="isClean() || myForm.$invalid || order.placed"
                                        class="btn btn-primary">
                                    {{buttonText}}
                                </button>
                                <button ng-click="payForOrder(order);"
                                        ng-disabled="isClean() || myForm.$invalid || !order.placed"
                                        class="btn btn-secondary">
                                    {{paymentButtonText}}
                                </button>
                            </div>
                            <div class="col-md-4 help-container">
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

